{{ define "users/table.html" }}
{{ if .Success }}
<p class="message-success" style="color:#15803d;">{{ .Success }}</p>
{{ end }}
{{ if .Error }}
<p class="message-error" style="color:#b91c1c;">{{ .Error }}</p>
{{ end }}

<table>
    <thead>
        <tr>
            <th>Корисничко име</th>
            <th>Улога</th>
            <th>Град</th>
            <th>Креиран</th>
            <th>Акције</th>
        </tr>
    </thead>
    <tbody>
        {{ if .Items }}
            {{ range .Items }}
            <tr>
                <td>{{ .Username }}</td>
                <td>{{ if eq .Role "admin" }}Администратор{{ else }}Корисник{{ end }}</td>
                <td>{{ if .City }}{{ .City }}{{ else }}-{{ end }}</td>
                <td>{{ .CreatedAt.Format "02.01.2006. 15:04" }}</td>
                <td>
                    <button class="secondary outline"
                        hx-get="/ui/users/{{ .ID }}/edit"
                        hx-target="body"
                        hx-trigger="click"
                        hx-swap="beforeend">
                        Промени
                    </button>
                    <button class="danger outline"
                        hx-delete="/ui/users/{{ .ID }}"
                        hx-target="#users-table"
                        hx-swap="innerHTML"
                        hx-confirm="Да ли сте сигурни да желите да обришете корисника '{{ .Username }}'?">
                        Обриши
                    </button>
                </td>
            </tr>
            {{ end }}
        {{ else }}
            <tr>
                <td colspan="5">Нема корисника.</td>
            </tr>
        {{ end }}
    </tbody>
</table>
{{ end }}
