{{ define "users/new.html" }}
<dialog open class="modal" data-modal-type="users-new">
    <article>
        <header>
            <h2>Нови корисник</h2>
        </header>
        <form
            hx-post="/ui/users"
            hx-target="#users-table"
            hx-swap="innerHTML"
            hx-include="closest form"
            hx-on::after-request="if(event.detail.successful){const dlg=this.closest('dialog');if(dlg){dlg.close();dlg.remove();}}"
        >
            {{ if .Error }}
            <p class="error-message" style="color:#b91c1c;">{{ .Error }}</p>
            {{ end }}
            <section class="form-card">
                <div class="form-stack">
                    <div class="form-field">
                        <label for="users-new-username">Корисничко име</label>
                        <input id="users-new-username" name="username" placeholder="нпр. admin" required>
                    </div>
                    <div class="form-field">
                        <label for="users-new-password">Лозинка</label>
                        <input id="users-new-password" type="password" name="password" placeholder="Минимум 8 карактера" required>
                    </div>
                    <div class="form-field">
                        <label for="users-new-role">Улога</label>
                        <select id="users-new-role" name="role">
                            <option value="user" selected>Корисник</option>
                            <option value="admin">Администратор</option>
                        </select>
                    </div>
                    <div class="form-field">
                        <label for="users-new-city">Град</label>
                        <input id="users-new-city" name="city" placeholder="нпр. Пирот">
                        <small class="muted">За обичне кориснике град је обавезан.</small>
                    </div>
                </div>
            </section>
            <footer>
                <button type="submit" class="primary">Сачувај</button>
                <button type="button" class="secondary" data-close-dialog>Откажи</button>
            </footer>
        </form>
    </article>
</dialog>
{{ end }}
