{{ define "svestenici/index.html" }}
{{ template "layouts/base" . }}
{{ end }}

{{ define "svestenici/content" }}
<section class="card">
    <div class="page-title">
        <div>
            <h1>Свештеници</h1>
            <p class="muted">Списак свештеника доступних за доделу крштеницама.</p>
        </div>
        <button class="primary"
            type="button"
            hx-get="/ui/svestenici/new"
            hx-target="#dialog-root"
            hx-trigger="click"
            hx-swap="innerHTML"
            hx-include="#svestenici-state, #svestenici-default-state">
            Нови свештеник
        </button>
    </div>
    <form class="inline-filter"
          hx-get="/ui/svestenici/table"
          hx-target="#svestenici-table"
          hx-trigger="submit"
          hx-swap="outerHTML">
        <input type="hidden" name="page_number" value="1">
        <input type="hidden" name="page_size" value="10">
        <div class="field-group">
            <label for="svestenici-search">Претрага по презимену</label>
            <input type="search"
                   id="svestenici-search"
                   name="last_name"
                   placeholder="нпр. Петровић"
                   aria-label="Тражи по делу презимена">
        </div>
        <button type="submit" class="secondary">Претражи</button>
    </form>
</section>

<form id="svestenici-default-state" hidden>
    <input type="hidden" name="page_number" value="1">
    <input type="hidden" name="page_size" value="10">
</form>

<section>
    <div id="svestenici-table"
         class="data-grid-wrapper"
         hx-get="/ui/svestenici/table"
         hx-trigger="load, refresh-svestenici-table from:body"
         hx-target="this"
         hx-include="#svestenici-state, #svestenici-default-state"
         hx-swap="outerHTML">
        <div class="htmx-indicator">Учитавање...</div>
    </div>
</section>
<div id="dialog-root"></div>
{{ end }}
