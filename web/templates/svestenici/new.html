{{ define "svestenici/new.html" }}
{{ $context := or .Context (and .Form .Form.Context) }}
{{ $pickerField := or .Field (and .Form .Form.PickerField) }}
<dialog open class="modal" id="svestenici-new-dialog">
    <article>
        <header>
            <h2>Нови свештеник</h2>
        </header>
        <form
            hx-post="/ui/svestenici"
            hx-target="#svestenici-new-dialog"
            hx-swap="outerHTML"
            hx-include="#svestenici-state, #svestenici-default-state"
            hx-on::after-request="if(event.detail.successful){if(window.refreshSvesteniciTable){window.refreshSvesteniciTable();}if(window.refreshSvesteniciPickerTable){window.refreshSvesteniciPickerTable();}var dialog=document.getElementById('svestenici-new-dialog');if(dialog){if(typeof dialog.close==='function'){dialog.close();}dialog.remove();}}"
        >
            <input type="hidden" name="context" value="{{ if $context }}{{ $context }}{{ end }}">
            <input type="hidden" name="picker_field" value="{{ if $pickerField }}{{ $pickerField }}{{ end }}">
            {{ if .Error }}
            <article class="secondary" style="padding: 0.75rem;">
                <strong>{{ .Error }}</strong>
            </article>
            {{ end }}
            <section class="form-card">
                <div class="form-stack">
                    <div class="field-row">
                        <div class="form-field">
                            <label for="svestenici-new-first-name">Име</label>
                            <input id="svestenici-new-first-name" name="first_name" value="{{ if .Form }}{{ .Form.FirstName }}{{ end }}" placeholder="нпр. Јован" required>
                        </div>
                        <div class="form-field">
                            <label for="svestenici-new-last-name">Презиме</label>
                            <input id="svestenici-new-last-name" name="last_name" value="{{ if .Form }}{{ .Form.LastName }}{{ end }}" placeholder="нпр. Јовановић" required>
                        </div>
                    </div>
                    <div class="field-row">
                        <div class="form-field">
                            <label for="svestenici-new-city">Град</label>
                            <input id="svestenici-new-city" name="city" value="{{ if .Form }}{{ .Form.City }}{{ end }}" placeholder="нпр. Нови Сад">
                        </div>
                        <div class="form-field">
                            <label for="svestenici-new-title">Титула</label>
                            <input id="svestenici-new-title" name="title" value="{{ if .Form }}{{ .Form.Title }}{{ end }}" placeholder="нпр. протојереј">
                        </div>
                    </div>
                </div>
            </section>
            <footer>
                <button type="submit" class="primary">Сачувај</button>
                <button type="button" class="secondary" data-close-dialog>Одустани</button>
            </footer>
        </form>
    </article>
</dialog>
{{ end }}
